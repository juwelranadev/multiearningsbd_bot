<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Multi Earnings BD</title>
  
  <!-- Global Styles -->
  <style>
   
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 0;
      background: linear-gradient(to bottom right, #000, #fff);
      color: #fff;
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
      position: relative;
      overflow-x: hidden;
    }
    .container {
      background:black;
      padding: 25px;
      border-radius: 15px;
      box-shadow: 0 8px 20px rgba(0,0,0,0.6);
      max-width: 90vw;
      width: 350px;
      text-align: center;
      min-height: 520px;
      margin: 60px 0 100px;
    }
    .container h1 {
      font-size: 1.8em;
      color: #00cc00;
      margin-bottom: 20px;
      text-shadow: 1px 1px 2px rgba(0,0,0,0.3);
    }
   
    /* earning sector starts*/
    
   .stats {
            background: darkblue;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
            position: relative;
            border: 6px solid transparent;
            animation: borderAnimation 2s infinite linear;
        }

        .stats p {
            margin: 5px 0;
            font-size: 1.2em;
            color: white;
            text-align:center;
        }

        @keyframes borderAnimation {
            0% {
                border-color: yellow;
                box-shadow: 0 0 5px yellow;
            }
            50% {
                border-color: orange;
                box-shadow: 0 0 15px orange;
            }
            100% {
                border-color: yellow;
                box-shadow: 0 0 5px yellow;
            }
        }

    
   /* earning statistics end */
    
    
    .progress-container {
      width: 100%;
      height: 8px;
      background-color: rgba(224,224,224,0.2);
      margin: 20px 0;
      border-radius: 6px;
      overflow: hidden;
      box-shadow: inset 0 1px 3px rgba(0,0,0,0.2);
    }
    .progress-bar {
      height: 100%;
      width: 0%;
      background: linear-gradient(to right, #00cc00, #009900);
      transition: width 0.3s ease-in-out;
    }
     
    
    
    /* button css starts */
    
    
    .buttons {
    display: flex;
    flex-direction: column;
    gap: 10px;
    margin: 20px 0;
  }
  

  .buttons button {
    width: 100%;
    padding: 12px;
    font-size: 1.1em;
    border: none;
    border-radius: 5px;
    color: white;
    background: linear-gradient(to bottom, #800000 0%, #ffff00 100%); /*front .push background */
    box-shadow: 0 6px #cc3300; /* .push shadow */
    cursor: pointer;
    transition: transform 0.2s, box-shadow 0.2s;
  }

  .buttons button:hover:not(:disabled) {
    transform: translateY(-2px);
    box-shadow: 0 4px white; /* .push hover shadow */
    background: #3333ff; /* Slightly darker shade on hover */
  }

  .buttons button:disabled {
    background:#666;
    cursor: not-allowed;
    opacity: 0.7;
  }

  .buttons button:active {
    box-shadow: 0 2px #c0392b; /* .push active shadow */
    transform: translateY(3px); /* Push effect when clicked */
  }
    
    
/* Notice dev css starts */

  .notice {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 50px; /* Fixed height */
  background: linear-gradient(to bottom, #00ff00 0%, #000000 50%);
  color: #fff;
  padding: 15px;
  font-size: 0.9em;
  text-align: center;
  z-index: 1000;
  box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
  overflow: hidden; /* Prevents text from overflowing */
  display: flex;
  align-items: center;
  justify-content: center;
  border: 4px solid transparent; /* Initial border */
  border-image: linear-gradient(45deg, #ff0000, #00ff00, #0000ff, #ff0000);
  border-image-slice: 1;
  animation: borderAnimation 3s linear infinite;
}

.notice span {
  display: inline-block;
  white-space: nowrap;
  animation: scrollText 25s linear infinite;
}

@keyframes scrollText {
  0% {
    transform: translateX(100%);
  }
  100% {
    transform: translateX(-100%);
  }
}

@keyframes borderAnimation {
  0% {
    border-image-source: linear-gradient(45deg, #ff0000, #00ff00, #0000ff, #ff0000);
  }
  25% {
    border-image-source: linear-gradient(45deg, #00ff00, #0000ff, #ff0000, #00ff00);
  }
  50% {
    border-image-source: linear-gradient(45deg, #0000ff, #ff0000, #00ff00, #0000ff);
  }
  75% {
    border-image-source: linear-gradient(45deg, #ff0000, #00ff00, #0000ff, #ff0000);
  }
  100% {
    border-image-source: linear-gradient(45deg, #ff0000, #00ff00, #0000ff, #ff0000);
  }
}

   /* Notice dev css closed 
    
    
    
  /* Direct WATCH BUTTON ANIMATION START*/
    
    
.watch-button {
  display: inline-block;
  padding: 12px 24px;
  font-size: 1.1em;
  color: white;
  background: linear-gradient(45deg, #007BFF, #0056b3);
  border: none;
  border-radius: 10px;
  text-decoration: none;
  cursor: pointer;
  margin-top: 15px;
  transition: transform 0.2s, box-shadow 0.2s, background 0.3s;
  box-shadow: 0 0 10px rgba(0, 123, 255, 0.8);
  animation: glow 0.5s infinite alternate;
}

.watch-button:hover {
  transform: translateY(-2px);
  box-shadow: 0 0 20px rgba(0, 86, 179, 1);
  background: linear-gradient(45deg, #0056b3, #004494);
}

.watch-button:active {
  transform: scale(0.95);
  box-shadow: 0 0 15px rgba(0, 86, 179, 0.8);
}

/* Glowing animation */
@keyframes glow {
  0% {
    box-shadow: 0 0 10px rgba(0, 123, 255, 0.8);
  }
  100% {
    box-shadow: 0 0 50px rgba(0, 123, 255, 1);
  }
}

    /* Direct WATCH BUTTON ANIMATION END */

    .timer {
      color: #ffcc00;
      font-size: 0.9em;
      margin-top: 10px;
    }
    
    /* Bottom Container Styles */
    .bottom-container {
      width: 100%;
      background: linear-gradient(45deg, #000, #f5f5f5);
      box-shadow: 0 -2px 5px rgba(0, 0, 0, 0.2);
      display: flex;
      justify-content: space-around;
      gap: 5px;
      padding: 10px 0;
      position: fixed;
      bottom: 0;
      left: 0;
      z-index: 1000;
    }

    .bottom-button {
      background: linear-gradient(45deg, #cc0000, #009900);
      border: none;
      color: #fff;
      font-weight: bold;
      padding: 10px 20px;
      line-height: 40px;
      border-radius: 8px;
      cursor: pointer;
      flex: 1;
      margin: 0 5px;
      text-align: center;
      transition: transform 0.2s, box-shadow 0.2s;
    }

    .bottom-button:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 8px rgba(0,0,0,0.3);
      opacity: 0.9;
    }

    
    /* Payment Popup Styles */
    .payment-popup-container {
      display: none;
      position: fixed;
      top: 0; left: 0; width: 100%; height: 100%;
      background: rgba(0, 0, 0, 0.7);
      justify-content: center; 
      align-items: center;
      z-index: 2000;
    }

    .payment-popup-popup {
      background: linear-gradient(135deg, #4A90E2, #8E44AD);
      padding: 20px;
      border-radius: 12px;
      width: 100%; 
      max-width: 400px;
      box-shadow: 0 8px 16px rgba(0, 0, 0, 0.5);
      color: #fff;
      display: flex;
      flex-direction: column;
      justify-content: space-between;
      height: auto;
    }

    .payment-popup-h2 {
      text-align: center;
      margin-bottom: 20px;
    }

    .payment-popup-form-group {
      margin-bottom: 15px;
    }

    .payment-popup-label {
      display: block;
      margin-bottom: 5px;
    }

    .payment-popup-input, .payment-popup-select {
      width: 100%;
      padding: 10px;
      border: 1px solid #ddd;
      border-radius: 6px;
      background: #f0f5ff;
      color: #333;
      outline: none;
    }

    .payment-popup-input:focus, .payment-popup-select:focus {
      border-color: #5cb85c;
      background: #e6f7ff;
    }

    .payment-popup-amount,
    .payment-popup-uid {
      width: 70%;
    }

    .payment-popup-submit-btn, .payment-popup-close-btn {
      padding: 10px 0;
      border-radius: 6px;
      width: 48%;
    }

    .payment-popup-submit-btn {
      background: linear-gradient(135deg, #28a745, #218838);
      color: #fff;
      border: none;
      cursor: pointer;
      display: none;
      transition: background 0.3s;
    }

    .payment-popup-submit-btn:hover {
      background: linear-gradient(135deg, #34d058, #28a745);
    }

    .payment-popup-close-btn {
      background: linear-gradient(135deg, #d9534f, #c9302c);
      color: #fff;
      border: none;
      cursor: pointer;
      transition: background 0.3s;
    }

    .payment-popup-close-btn:hover {
      background: linear-gradient(135deg, #f45b5b, #d9534f);
    }

    .payment-popup-buttons {
      display: flex;
      justify-content: center;
      gap: 10px;
      margin-top: 20px;
    }

    .payment-popup-points {
      font-size: 14px;
      font-weight: bold;
      color: #fff;
      background: #333;
      padding: 5px 10px;
      border-radius: 6px;
      width: fit-content;
      margin: 0 auto;
      text-align: center;
    }
  </style>
  
  <!-- Monetag Ads Script -->
  <script src="//whephiwums.com/sdk.js" data-zone="9041728" data-sdk="show_9041728"></script>
</head>
<body>
  <div class="notice">
    <span>NOTICE:‡¶Ö‡¶®‡ßÅ‡¶ó‡ßç‡¶∞‡¶π ‡¶ï‡¶∞‡ßá ‡¶≤‡¶ï‡ßç‡¶∑‡ßç‡¶Ø ‡¶ï‡¶∞‡ßÅ‡¶® ‡¶Ø‡ßá ‡¶∏‡¶∞‡ßç‡¶¨‡¶æ‡¶ß‡¶ø‡¶ï ‡¶¨‡¶ø‡¶ú‡ßç‡¶û‡¶æ‡¶™‡¶®‡ßá‡¶∞ ‡¶∏‡ßÄ‡¶Æ‡¶æ ‡¶π‡¶≤‡ßã ‡¶™‡ßç‡¶∞‡¶§‡¶ø‡¶¶‡¶ø‡¶® 300 ‡¶ü‡¶ø‡•§ ‡¶∏‡ßÄ‡¶Æ‡¶æ ‡¶™‡ßÇ‡¶∞‡¶£ ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶™‡¶∞ ‡ßß‡ß® ‡¶ò‡¶£‡ßç‡¶ü‡¶æ‡¶∞ ‡¶ï‡ßÅ‡¶≤‡¶°‡¶æ‡¶â‡¶® ‡¶∂‡ßÅ‡¶∞‡ßÅ ‡¶π‡¶¨‡ßá, ‡¶è‡¶∞‡¶™‡¶∞ ‡¶Ü‡¶™‡¶®‡¶ø ‡¶Ü‡¶∞‡¶ì ‡¶¨‡¶ø‡¶ú‡ßç‡¶û‡¶æ‡¶™‡¶® ‡¶¶‡ßá‡¶ñ‡¶§‡ßá ‡¶™‡¶æ‡¶∞‡¶¨‡ßá‡¶®‡•§</span>
  </div>
  
  
  <div class="container">
    <h1>Multi Earnings BD</h1>
    
    <div class="stats">
      <p>TOTAL $ZK: <span id="earned-points">0</span></p>
      <p>DAILY: <span id="watched-ads">0</span> / 300</p>
      
      <div id="timer" class="timer"></div>
    </div>
    
    <div class="progress-container">
      <div class="progress-bar" id="progress-bar"></div>
    </div>
    
    <div class="buttons">
      <button id="watch-ad-btn" onclick="watchAd()">Watch Ad</button>
      <button id="auto-ad-btn" onclick="startAutoAds()">Auto Show Ads</button>
      <button id="stop-auto-btn" onclick="stopAutoAds()" disabled>Stop Auto Ads</button>
      <button id="showAd" onclick="showMonetagAd()">Show Rewarded Ad (<span id="cooldownTimer"></span>)</button>
    </div>
    
    <a href="https://giphootchebs.net/4/9048491" class="watch-button" target="_blank" rel="noopener">Direct Watch</a>
  </div>

  <!-- Bottom Navigation Buttons -->
  <div class="bottom-container">
    <button class="bottom-button" onclick="showPaymentPopup()">Payment</button>
    <button class="bottom-button" onclick="showAnnouncement()">Announcement</button>
    <button class="bottom-button" onclick="showSupport()">Support</button>
  </div>

  <!-- Payment Popup -->
  <div class="payment-popup-container" id="popupContainer">
    <div class="payment-popup-popup">
      <h2 class="payment-popup-h2">PAYMENT REQUEST</h2>

      <div class="payment-popup-form-group">
        <label class="payment-popup-label">AVAILABLE $ZK:</label>
        <span class="payment-popup-points" id="availablePoints">0</span>
      </div>

      <div class="payment-popup-form-group">
        <label class="payment-popup-label" for="amount">Input Amount:</label>
        <input type="number" id="amount" class="payment-popup-amount payment-popup-input" placeholder="Enter amount" />
      </div>

      <div class="payment-popup-form-group">
        <label class="payment-popup-label" for="paymentType">Payment Type:</label>
        <select id="paymentType" class="payment-popup-paymentType payment-popup-select">
          <option value="">Select Payment Type</option>
          <option value="BDT">BDT</option>
          <option value="USDT">USDT</option>
        </select>
      </div>

      <div class="payment-popup-form-group" id="bdtOptions" style="display: none;">
        <label class="payment-popup-label" for="bdtMethod">Payment Method:</label>
        <select id="bdtMethod" class="payment-popup-bdtMethod payment-popup-select">
          <option value="">Select Method</option>
          <option value="Bkash">Bkash</option>
          <option value="Nagad">Nagad</option>
          <option value="Rocket">Rocket</option>
        </select>

        <div class="payment-popup-form-group">
          <label class="payment-popup-label" for="bdtNumber">Number:</label>
          <input type="text" id="bdtNumber" class="payment-popup-bdtNumber payment-popup-input" value="8801" />
        </div>
      </div>

      <div class="payment-popup-form-group" id="usdtOptions" style="display: none;">
        <label class="payment-popup-label" for="usdtMethod">Payment Method:</label>
        <select id="usdtMethod" class="payment-popup-usdtMethod payment-popup-select">
          <option value="">Select Exchanger</option>
          <option value="Binance">Binance</option>
          <option value="Bitget">Bitget</option>
          <option value="Bybit">Bybit</option>
          <option value="Mexc">Mexc</option>
          <option value="Gate">Gate.io</option>
        </select>

        <div class="payment-popup-form-group">
          <label class="payment-popup-label" for="uid">UID:</label>
          <input type="text" id="uid" class="payment-popup-uid payment-popup-input" placeholder="Enter UID" />
        </div>
      </div>

      <div class="payment-popup-buttons">
        <button class="payment-popup-submit-btn" id="submitBtn">Submit</button>
        <button class="payment-popup-close-btn" id="closePopup">Close</button>
      </div>
    </div>
  </div>
  
  <script>
    // Global variables and initialization
    let watchedAdsCount = 0;
    let earnedPoints = 0.00;
    const maxAdsPerDay = 300;
    const cooldownHours = 12;
    let autoAdInterval;
    let lastResetTime = parseInt(localStorage.getItem('lastResetTime')) || new Date().getTime();
    let lastRewardedAdTime = parseInt(localStorage.getItem('lastRewardedAdTime')) || 0;
    let cooldownInterval;
    let autoWatchCount = parseInt(localStorage.getItem('autoWatchCount')) || 0;
    let directWatchCount = parseInt(localStorage.getItem('directWatchCount')) || 0;
    
    // DOM Elements
    const progressBar = document.getElementById('progress-bar');
    const watchAdButton = document.getElementById('watch-ad-btn');
    const autoAdButton = document.getElementById('auto-ad-btn');
    const stopAutoButton = document.getElementById('stop-auto-btn');
    const timerElement = document.getElementById('timer');
    const rewardedAdButton = document.getElementById('showAd');
    const cooldownTimer = document.getElementById('cooldownTimer');
    
    // Load saved data
    function loadSavedData() {
      watchedAdsCount = parseInt(localStorage.getItem('watchedAdsCount')) || 0;
      earnedPoints = parseFloat(localStorage.getItem('earnedPoints')) || 0;
      updateUI();
    }
    
    // Update UI elements
    function updateUI() {
      document.getElementById('watched-ads').textContent = watchedAdsCount;
      document.getElementById('earned-points').textContent = earnedPoints.toFixed(2);
      updateProgressBar();
      checkAdLimit();
    }
    
    // Update progress bar
    function updateProgressBar() {
      const progress = (watchedAdsCount / maxAdsPerDay) * 100;
      progressBar.style.width = `${Math.min(progress, 100)}%`;
    }
    
    // Format time remaining
    function formatTimeRemaining(milliseconds) {
      const hours = Math.floor(milliseconds / (1000 * 60 * 60));
      const minutes = Math.floor((milliseconds % (1000 * 60 * 60)) / (1000 * 60));
      return `${hours}h ${minutes}m`;
    }
    
    // Check ad limit and update UI
    function checkAdLimit() {
      const now = new Date().getTime();
      const elapsed = now - lastResetTime;
      const cooldownPeriod = cooldownHours * 60 * 60 * 1000;
      
      if (watchedAdsCount >= maxAdsPerDay) {
        if (elapsed < cooldownPeriod) {
          const timeRemaining = cooldownPeriod - elapsed;
          timerElement.textContent = `Cooldown: ${formatTimeRemaining(timeRemaining)}`;
          disableAdButtons(true);
        } else {
          resetDaily();
        }
      } else {
        timerElement.textContent = '';
        disableAdButtons(false);
      }
    }
    
    // Disable/Enable ad buttons
    function disableAdButtons(disabled) {
      watchAdButton.disabled = disabled;
      autoAdButton.disabled = disabled;
      watchAdButton.innerText = disabled ? "Ad limit reached" : "Watch Ad";
      if (disabled && autoAdInterval) {
        stopAutoAds();
      }
    }
    
    // Reset daily counters
    function resetDaily() {
      watchedAdsCount = 0;
      lastResetTime = new Date().getTime();
      localStorage.setItem('lastResetTime', lastResetTime);
      localStorage.setItem('watchedAdsCount', watchedAdsCount);
      updateUI();
    }
    
    // Watch Ad function
    function watchAd() {
      if (watchedAdsCount < maxAdsPerDay && typeof show_9041728 === 'function') {
        show_9041728().then(() => {
          watchedAdsCount++;
          earnedPoints += 0.1;
          localStorage.setItem('watchedAdsCount', watchedAdsCount);
          localStorage.setItem('earnedPoints', earnedPoints.toFixed(2));
          updateUI();
        }).catch(err => {
          console.error("Ad failed to load:", err);
          alert("Failed to load ad. Please try again.");
        });
      }
    }
    
    // Auto Ads
    function startAutoAds() {
      autoAdInterval = setInterval(watchAd, 5000);
      stopAutoButton.disabled = false;
      autoAdButton.disabled = true;
      autoWatchCount++;
      localStorage.setItem('autoWatchCount', autoWatchCount);
    }
    
    // Stop Auto Ads
    function stopAutoAds() {
      clearInterval(autoAdInterval);
      stopAutoButton.disabled = true;
      autoAdButton.disabled = false;
    }
    
    // Show Rewarded Ad with cooldown
    function showMonetagAd() {
      const now = new Date().getTime();
      const timeSinceLastAd = now - lastRewardedAdTime;
      const cooldownPeriod = 30000; // 30 seconds in milliseconds
      
      if (timeSinceLastAd >= cooldownPeriod && typeof show_9041728 === 'function') {
        show_9041728('pop').then(() => {
          console.log("Rewarded ad shown successfully");
          lastRewardedAdTime = now;
          localStorage.setItem('lastRewardedAdTime', lastRewardedAdTime);
          directWatchCount++;
          localStorage.setItem('directWatchCount', directWatchCount);
          startCooldownTimer();
        }).catch(err => {
          console.error("Rewarded ad failed to load:", err);
          alert("Failed to load rewarded ad. Please try again.");
        });
      }
    }

    // Start cooldown timer
    function startCooldownTimer() {
      rewardedAdButton.disabled = true;
      const cooldownPeriod = 30; // 30 seconds
      let timeLeft = cooldownPeriod;
      
      cooldownTimer.textContent = timeLeft + 's';
      
      if (cooldownInterval) {
        clearInterval(cooldownInterval);
      }
      
      cooldownInterval = setInterval(() => {
        timeLeft--;
        cooldownTimer.textContent = timeLeft + 's';
        
        if (timeLeft <= 0) {
          clearInterval(cooldownInterval);
          rewardedAdButton.disabled = false;
          cooldownTimer.textContent = 'Start';
        }
      }, 1000);
    }

    // Check rewarded ad cooldown on page load
    function checkRewardedAdCooldown() {
      const now = new Date().getTime();
      const timeSinceLastAd = now - lastRewardedAdTime;
      const cooldownPeriod = 30000; // 30 seconds in milliseconds
      
      if (timeSinceLastAd < cooldownPeriod) {
        const timeLeft = Math.ceil((cooldownPeriod - timeSinceLastAd) / 1000);
        rewardedAdButton.disabled = true;
        cooldownTimer.textContent = timeLeft + 's';
        
        setTimeout(() => {
          rewardedAdButton.disabled = false;
          cooldownTimer.textContent = 'Start';
        }, cooldownPeriod - timeSinceLastAd);
      } else {
        cooldownTimer.textContent = 'Start';
      }
    }

    // Initialize
    loadSavedData();
    checkRewardedAdCooldown();
    
    // Update timer every minute
    setInterval(checkAdLimit, 60000);
    
    // Handle page visibility changes
    document.addEventListener('visibilitychange', () => {
      if (!document.hidden) {
        loadSavedData();
      }
    });

    // Bottom button handlers
    function showPaymentPopup() {
      document.getElementById('popupContainer').style.display = 'flex';
      document.getElementById('availablePoints').textContent = earnedPoints.toFixed(2);
    }

    function showAnnouncement() {
      window.open('https://t.me/cmultiearningsbd', '_blank');
    }

    function showSupport() {
      window.open('https://t.me/gmultiearningsbd', '_blank');
    }

    // Payment popup handlers
    document.getElementById('closePopup').addEventListener('click', function() {
      document.getElementById('popupContainer').style.display = 'none';
    });

    const paymentType = document.getElementById('paymentType');
    const bdtOptions = document.getElementById('bdtOptions');
    const usdtOptions = document.getElementById('usdtOptions');

    // Telegram payment request bot configuration
    const BOT_TOKEN = '8171093004:AAHPM6rG3pb3XrOhPly4JFMc4ZwMLNzm48k';
    const CHAT_ID = '7637252481';

    // Ad monetization constants
    const POINTS_PER_AD = 0.1;
    const MAX_DAILY_ADS = 100;

    paymentType.addEventListener('change', function() {
      bdtOptions.style.display = this.value === 'BDT' ? 'block' : 'none';
      usdtOptions.style.display = this.value === 'USDT' ? 'block' : 'none';
      checkFormValidity();
    });

    function checkFormValidity() {
      const amount = document.getElementById('amount').value.trim();
      const submitBtn = document.getElementById('submitBtn');
      const paymentTypeValue = paymentType.value;
      const bdtMethodValue = document.getElementById('bdtMethod').value;
      const usdtMethodValue = document.getElementById('usdtMethod').value;
      const bdtNumber = document.getElementById('bdtNumber').value.trim();
      const uid = document.getElementById('uid').value.trim();

      const isBdtValid = paymentTypeValue === 'BDT' && bdtMethodValue && bdtNumber && bdtNumber.length >= 11;
      const isUsdtValid = paymentTypeValue === 'USDT' && usdtMethodValue && uid && uid.length >= 4;
      const amountValid = amount && parseFloat(amount) <= earnedPoints && parseFloat(amount) > 0;

      if (amountValid && (isBdtValid || isUsdtValid)) {
        submitBtn.style.display = 'block';
      } else {
        submitBtn.style.display = 'none';
      }

      // For debugging
      console.log({
        amount,
        earnedPoints,
        paymentTypeValue,
        bdtMethodValue,
        usdtMethodValue,
        bdtNumber,
        uid,
        isBdtValid,
        isUsdtValid,
        amountValid
      });
    }

    // Add event listeners for form validation
    document.getElementById('amount').addEventListener('input', checkFormValidity);
    document.getElementById('bdtMethod').addEventListener('change', checkFormValidity);
    document.getElementById('usdtMethod').addEventListener('change', checkFormValidity);
    document.getElementById('bdtNumber').addEventListener('input', checkFormValidity);
    document.getElementById('uid').addEventListener('input', checkFormValidity);

    document.getElementById('submitBtn').addEventListener('click', async function() {
      const amount = parseFloat(document.getElementById('amount').value);
      const paymentTypeValue = paymentType.value;
      let paymentMethod, accountNumber;

      if (paymentTypeValue === 'BDT') {
        paymentMethod = document.getElementById('bdtMethod').value;
        accountNumber = document.getElementById('bdtNumber').value;
      } else {
        paymentMethod = document.getElementById('usdtMethod').value;
        accountNumber = document.getElementById('uid').value;
      }

      if (amount > earnedPoints) {
        alert('You do not have enough points for this withdrawal');
        return;
      }

      // Calculate earnings statistics
      const adsWatchedToday = watchedAdsCount;
      const pointsEarnedToday = (adsWatchedToday * POINTS_PER_AD).toFixed(2);
      const remainingAdsToday = MAX_DAILY_ADS - adsWatchedToday;
      const potentialEarningsToday = (remainingAdsToday * POINTS_PER_AD).toFixed(2);

      // Create message for Telegram
      const message = `üîî New Payment Request\n\n` +
                     `üí∞ Withdrawal Amount: ${amount} $ZK\n` +
                     `üí≥ Payment Type: ${paymentTypeValue}\n` +
                     `üè¶ Payment Method: ${paymentMethod}\n` +
                     `üì± ${paymentTypeValue === 'BDT' ? 'Phone Number' : 'UID'}: ${accountNumber}\n` +
                     `\nüìä User Statistics:\n` +
                     `‚≠ê Current Balance: ${earnedPoints.toFixed(2)} $ZK\n` +
                     `üí´ Balance After Withdrawal: ${(earnedPoints - amount).toFixed(2)} $ZK\n` +
                     `\nüìà Today's Activity:\n` +
                     `üëÅ Ads Watched: ${adsWatchedToday}/${MAX_DAILY_ADS}\n` +
                     `üíé $ZK Earned: ${pointsEarnedToday}\n` +
                     `üìù Remaining Ads: ${remainingAdsToday}\n` +
                     `‚ú® Potential $ZK: ${potentialEarningsToday}\n` +
                     `\n‚öôÔ∏è System Info:\n` +
                     `- $ZK Per Ad: ${POINTS_PER_AD}\n` +
                     `- Daily Ad Limit: ${MAX_DAILY_ADS}\n` +
                     `\n‚è∞ Request Time: ${new Date().toLocaleString()}\n` +
                     `üë§ Username: ${localStorage.getItem('username') || 'Not provided'}`;

      try {
        // Send to Telegram
        const response = await fetch(`https://api.telegram.org/bot${BOT_TOKEN}/sendMessage`, {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
          },
          body: JSON.stringify({
            chat_id: CHAT_ID,
            text: message,
            parse_mode: 'Markdown'
          })
        });

        const responseData = await response.json(); // Get the response data
        console.log('Telegram API Response:', responseData); // Log it for debugging

        if (response.ok) {
          // Deduct points and update storage
          earnedPoints -= amount;
          localStorage.setItem('earnedPoints', earnedPoints.toFixed(2));
          document.getElementById('earned-points').textContent = earnedPoints.toFixed(2);
          
          // Clear form fields
          document.getElementById('amount').value = '';
          document.getElementById('bdtNumber').value = '8801';
          document.getElementById('uid').value = '';
          document.getElementById('paymentType').value = '';
          document.getElementById('bdtMethod').value = '';
          document.getElementById('usdtMethod').value = '';
          
          // Hide payment method options
          bdtOptions.style.display = 'none';
          usdtOptions.style.display = 'none';
          
          // Close popup and show success message
          document.getElementById('popupContainer').style.display = 'none';
          alert('Payment request submitted successfully! Our team will process it shortly.');
        } else {
          throw new Error(`Failed to send payment request: ${responseData.description || 'Unknown error'}`);
        }
      } catch (error) {
        console.error('Error:', error);
        alert('Error submitting payment request. Please try again later or contact support.');
      }
    });
  </script>
</body>
</html>
